# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a static website serving as a local archive for CSWEP (Committee on the Status of Women in the Economics Profession) newsletters from the American Economic Association. The site displays newsletter PDFs from 1972-2025 with individual articles nested under each issue.

**Original source**: https://www.aeaweb.org/about-aea/committees/cswep/news-and-events/newsletters/archives

## Architecture

- **cswep_news_master.xlsx**: Single source of truth with two sheets:
  - `Issues` (166 rows): issue name, year, focus_topic, editor, url
  - `Articles` (477 rows): title, author, issue, year, topics, topic, audience, url, source
- **build_site.py**: Build script that reads the master spreadsheet and generates both `index.html` and `articles.json`
- **template.html**: HTML template with `<!-- NEWSLETTER_CONTENT -->`, `{{MIN_YEAR}}`, and `{{MAX_YEAR}}` placeholders
- **index.html**: Generated output -- do not hand-edit newsletter data (regenerate with build script)
- **articles.json**: Generated article index data (477 articles, 1996-2025) with title, author, issue, year, topics array, and URL
- **styles.css**: AEA-branded styling with responsive design

## Development

Open `index.html` directly in a browser or serve with:
```bash
python -m http.server 8000
```

### Building the Site

After modifying `cswep_news_master.xlsx` or `template.html`:
```bash
python build_site.py
```

This generates both `index.html` and `articles.json` from the master spreadsheet.

Article URLs use Google Docs viewer to display AEA PDFs in-browser:
`https://docs.google.com/viewer?url=https://www.aeaweb.org/content/file?id=XXXXX`

## Content Structure

Newsletter entries follow this HTML pattern (generated by build_site.py):
```html
<div class="newsletter-item">
    <a href="https://docs.google.com/viewer?url=https://www.aeaweb.org/content/file?id=XXXXX" class="newsletter-link">Issue N YYYY</a>
    <span class="newsletter-focus">- Focus Topic</span>
    <span class="newsletter-editor">Co-Editor: Name</span>
</div>
```

Articles are injected dynamically from articles.json based on matching issue names.

## Adding New Issues

Add a new row to the `Issues` sheet in `cswep_news_master.xlsx`:

| issue | year | focus_topic | editor | url |
|-------|------|-------------|--------|-----|
| Issue I 2026 | 2026 | Focus Topic Name | Co-Editor: Name | https://docs.google.com/viewer?url=... |

Then run `python build_site.py`.

## Adding New Articles

Add new rows to the `Articles` sheet in `cswep_news_master.xlsx`:

| title | author | issue | year | topics | topic | audience | url | source |
|-------|--------|-------|------|--------|-------|----------|-----|--------|
| Article Title | Author Name | Issue I 2026 | 2026 | Topic1, Topic2 | Topic1, Topic2 | | https://... | scraped |

- The `topics` column is a comma-separated list of all topics for the article (issue focus topic + article-specific topics)
- The `topic` column mirrors `topics` (kept for compatibility)
- Set `source` to `scraped` for manually added articles
- Then run `python build_site.py`

## Features

- **Search**: Filters newsletters and articles by text
- **Topic filter**: Dropdown with 47 individual topic categories; articles with multiple topics appear under each matching filter
- **Year filter**: Dropdown for years 1972-2025
- **Article badges**: Shows article count per newsletter issue; individual topic badges on each article
- **Citations**: `[Cite]` button on each issue and article; click to reveal formatted citation with copy button
- **Load More**: Years before 2021 are hidden by default behind a "Load More" button (configurable via `LOAD_MORE_CUTOFF` in build_site.py)

### Citation Formats

Issue citation:
```
CSWEP News, Issue IV 2025: Focus on Fertility. American Economic Association. [URL]
```

Article citation:
```
Author Name. "Article Title." CSWEP News, Issue IV 2025. American Economic Association. [URL]
```

## Topic System

Articles have a `topics` array containing individual tags. Each article inherits its issue's focus topic plus any article-specific topics. For example, an article in Issue IV 2025 (Focus on Fertility) might have:
```json
"topics": ["Fertility", "Work-Life Balance"]
```

This article will appear when filtering by either "Fertility" or "Work-Life Balance".
